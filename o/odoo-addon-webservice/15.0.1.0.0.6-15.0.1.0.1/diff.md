# Comparing `tmp/odoo_addon_webservice-15.0.1.0.0.6-py3-none-any.whl.zip` & `tmp/odoo_addon_webservice-15.0.1.0.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 26346 bytes, number of entries: 23
--rw-r--r--  2.0 unx     2637 b- defN 22-Aug-10 13:14 odoo/addons/webservice/README.rst
--rw-r--r--  2.0 unx       46 b- defN 22-Aug-10 13:14 odoo/addons/webservice/__init__.py
--rw-r--r--  2.0 unx      606 b- defN 22-Aug-10 13:14 odoo/addons/webservice/__manifest__.py
--rw-r--r--  2.0 unx       57 b- defN 22-Aug-10 13:14 odoo/addons/webservice/components/__init__.py
--rw-r--r--  2.0 unx      700 b- defN 22-Aug-10 13:14 odoo/addons/webservice/components/base_adapter.py
--rw-r--r--  2.0 unx     1439 b- defN 22-Aug-10 13:14 odoo/addons/webservice/components/request_adapter.py
--rw-r--r--  2.0 unx     5328 b- defN 22-Aug-10 13:14 odoo/addons/webservice/i18n/fr.po
--rw-r--r--  2.0 unx     4976 b- defN 22-Aug-10 13:14 odoo/addons/webservice/i18n/webservice.pot
--rw-r--r--  2.0 unx       33 b- defN 22-Aug-10 13:14 odoo/addons/webservice/models/__init__.py
--rw-r--r--  2.0 unx     1479 b- defN 22-Aug-10 13:14 odoo/addons/webservice/models/webservice_backend.py
--rw-r--r--  2.0 unx       41 b- defN 22-Aug-10 13:14 odoo/addons/webservice/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       62 b- defN 22-Aug-10 13:14 odoo/addons/webservice/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      183 b- defN 22-Aug-10 13:14 odoo/addons/webservice/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 22-Aug-10 13:14 odoo/addons/webservice/static/description/icon.png
--rw-r--r--  2.0 unx    11768 b- defN 22-Aug-10 13:14 odoo/addons/webservice/static/description/index.html
--rw-r--r--  2.0 unx       30 b- defN 22-Aug-10 13:14 odoo/addons/webservice/tests/__init__.py
--rw-r--r--  2.0 unx      738 b- defN 22-Aug-10 13:14 odoo/addons/webservice/tests/common.py
--rw-r--r--  2.0 unx     3737 b- defN 22-Aug-10 13:14 odoo/addons/webservice/tests/test_webservice.py
--rw-r--r--  2.0 unx     2885 b- defN 22-Aug-10 13:14 odoo/addons/webservice/views/webservice_backend.xml
--rw-r--r--  2.0 unx     3379 b- defN 22-Aug-10 13:14 odoo_addon_webservice-15.0.1.0.0.6.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Aug-10 13:14 odoo_addon_webservice-15.0.1.0.0.6.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Aug-10 13:14 odoo_addon_webservice-15.0.1.0.0.6.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2287 b- defN 22-Aug-10 13:14 odoo_addon_webservice-15.0.1.0.0.6.dist-info/RECORD
-23 files, 51963 bytes uncompressed, 22476 bytes compressed:  56.7%
+Zip file size: 26595 bytes, number of entries: 23
+-rw-r--r--  2.0 unx     2637 b- defN 23-Jul-24 13:45 odoo/addons/webservice/README.rst
+-rw-r--r--  2.0 unx       46 b- defN 23-Jul-24 13:45 odoo/addons/webservice/__init__.py
+-rw-r--r--  2.0 unx      606 b- defN 23-Jul-24 13:45 odoo/addons/webservice/__manifest__.py
+-rw-r--r--  2.0 unx       57 b- defN 23-Jul-24 13:45 odoo/addons/webservice/components/__init__.py
+-rw-r--r--  2.0 unx      700 b- defN 23-Jul-24 13:45 odoo/addons/webservice/components/base_adapter.py
+-rw-r--r--  2.0 unx     1869 b- defN 23-Jul-24 13:45 odoo/addons/webservice/components/request_adapter.py
+-rw-r--r--  2.0 unx     5328 b- defN 23-Jul-24 13:45 odoo/addons/webservice/i18n/fr.po
+-rw-r--r--  2.0 unx     4976 b- defN 23-Jul-24 13:45 odoo/addons/webservice/i18n/webservice.pot
+-rw-r--r--  2.0 unx       33 b- defN 23-Jul-24 13:45 odoo/addons/webservice/models/__init__.py
+-rw-r--r--  2.0 unx     1479 b- defN 23-Jul-24 13:45 odoo/addons/webservice/models/webservice_backend.py
+-rw-r--r--  2.0 unx       41 b- defN 23-Jul-24 13:45 odoo/addons/webservice/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       62 b- defN 23-Jul-24 13:45 odoo/addons/webservice/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      183 b- defN 23-Jul-24 13:45 odoo/addons/webservice/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-24 13:45 odoo/addons/webservice/static/description/icon.png
+-rw-r--r--  2.0 unx    11768 b- defN 23-Jul-24 13:45 odoo/addons/webservice/static/description/index.html
+-rw-r--r--  2.0 unx       30 b- defN 23-Jul-24 13:45 odoo/addons/webservice/tests/__init__.py
+-rw-r--r--  2.0 unx      738 b- defN 23-Jul-24 13:45 odoo/addons/webservice/tests/common.py
+-rw-r--r--  2.0 unx     4899 b- defN 23-Jul-24 13:45 odoo/addons/webservice/tests/test_webservice.py
+-rw-r--r--  2.0 unx     2885 b- defN 23-Jul-24 13:45 odoo/addons/webservice/views/webservice_backend.xml
+-rw-r--r--  2.0 unx     3377 b- defN 23-Jul-24 13:45 odoo_addon_webservice-15.0.1.0.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-24 13:45 odoo_addon_webservice-15.0.1.0.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-24 13:45 odoo_addon_webservice-15.0.1.0.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2279 b- defN 23-Jul-24 13:45 odoo_addon_webservice-15.0.1.0.1.dist-info/RECORD
+23 files, 53545 bytes uncompressed, 22741 bytes compressed:  57.5%
```

## zipnote {}

```diff
@@ -51,20 +51,20 @@
 
 Filename: odoo/addons/webservice/tests/test_webservice.py
 Comment: 
 
 Filename: odoo/addons/webservice/views/webservice_backend.xml
 Comment: 
 
-Filename: odoo_addon_webservice-15.0.1.0.0.6.dist-info/METADATA
+Filename: odoo_addon_webservice-15.0.1.0.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_webservice-15.0.1.0.0.6.dist-info/WHEEL
+Filename: odoo_addon_webservice-15.0.1.0.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_webservice-15.0.1.0.0.6.dist-info/top_level.txt
+Filename: odoo_addon_webservice-15.0.1.0.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_webservice-15.0.1.0.0.6.dist-info/RECORD
+Filename: odoo_addon_webservice-15.0.1.0.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/webservice/__manifest__.py

```diff
@@ -1,15 +1,15 @@
 # Copyright 2020 Creu Blanca
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "WebService",
     "summary": """
         Defines webservice abstract definition to be used generally""",
-    "version": "15.0.1.0.0",
+    "version": "15.0.1.0.1",
     "license": "AGPL-3",
     "development_status": "Production/Stable",
     "maintainers": ["etobella"],
     "author": "Creu Blanca,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/web-api",
     "depends": ["component", "server_environment"],
     "data": ["security/ir.model.access.csv", "views/webservice_backend.xml"],
```

## odoo/addons/webservice/components/request_adapter.py

```diff
@@ -7,22 +7,22 @@
 
 
 class BaseRestRequestsAdapter(Component):
     _name = "base.requests"
     _webservice_protocol = "http"
     _inherit = "base.webservice.adapter"
 
-    def _request(self, method, **kwargs):
+    # TODO: url and url_params could come from work_ctx
+    def _request(self, method, url=None, url_params=None, **kwargs):
+        url = self._get_url(url=url, url_params=url_params)
         new_kwargs = kwargs.copy()
         new_kwargs.update(
             {"auth": self._get_auth(**kwargs), "headers": self._get_headers(**kwargs)}
         )
-        request = requests.request(
-            method, self.collection.url.format(**kwargs), **new_kwargs
-        )
+        request = requests.request(method, url, **new_kwargs)
         request.raise_for_status()
         return request.content
 
     def get(self, **kwargs):
         return self._request("get", **kwargs)
 
     def post(self, **kwargs):
@@ -41,7 +41,15 @@
     def _get_headers(self, content_type=False, headers=False, **kwargs):
         result = {
             "Content-Type": content_type or self.collection.content_type,
         }
         if isinstance(headers, dict):
             result.update(headers)
         return result
+
+    def _get_url(self, url=None, url_params=None, **kwargs):
+        if not url:
+            # TODO: if url is given, we should validate the domain
+            # to avoid abusing a webservice backend for different calls.
+            url = self.collection.url
+        url_params = url_params or kwargs
+        return url.format(**url_params)
```

## odoo/addons/webservice/tests/test_webservice.py

```diff
@@ -28,15 +28,15 @@
             self.webservice.call("get")
 
     @responses.activate
     def test_web_service_get(self):
         responses.add(responses.GET, self.url, body="{}")
         result = self.webservice.call("get")
         self.assertEqual(result, b"{}")
-        self.assertEqual(1, len(responses.calls))
+        self.assertEqual(len(responses.calls), 1)
         self.assertEqual(
             responses.calls[0].request.headers["Content-Type"], "application/xml"
         )
 
     @responses.activate
     def test_web_service_post(self):
         responses.add(responses.POST, self.url, body="{}")
@@ -59,37 +59,66 @@
 
     @responses.activate
     def test_web_service_backend_username(self):
         self.webservice.write({"username": "user", "password": "pass"})
         responses.add(responses.GET, self.url, body="{}")
         result = self.webservice.call("get")
         self.assertEqual(result, b"{}")
-        self.assertEqual(1, len(responses.calls))
+        self.assertEqual(len(responses.calls), 1)
         self.assertEqual(
             responses.calls[0].request.headers["Content-Type"], "application/xml"
         )
         data = auth._basic_auth_str("user", "pass")
         self.assertEqual(responses.calls[0].request.headers["Authorization"], data)
 
     @responses.activate
     def test_web_service_username(self):
         self.webservice.write({"username": "user", "password": "pass"})
         responses.add(responses.GET, self.url, body="{}")
         result = self.webservice.call("get", auth=("user2", "pass2"))
         self.assertEqual(result, b"{}")
-        self.assertEqual(1, len(responses.calls))
+        self.assertEqual(len(responses.calls), 1)
         self.assertEqual(
             responses.calls[0].request.headers["Content-Type"], "application/xml"
         )
         data = auth._basic_auth_str("user2", "pass2")
         self.assertEqual(responses.calls[0].request.headers["Authorization"], data)
 
     @responses.activate
     def test_web_service_headers(self):
         responses.add(responses.GET, self.url, body="{}")
         result = self.webservice.call("get", headers={"demo_header": "HEADER"})
         self.assertEqual(result, b"{}")
-        self.assertEqual(1, len(responses.calls))
+        self.assertEqual(len(responses.calls), 1)
+        self.assertEqual(
+            responses.calls[0].request.headers["Content-Type"], "application/xml"
+        )
+        self.assertEqual(responses.calls[0].request.headers["demo_header"], "HEADER")
+
+    @responses.activate
+    def test_web_service_call_args(self):
+        url = "https://custom.url"
+        responses.add(responses.POST, url, body="{}")
+        result = self.webservice.call(
+            "post", url=url, headers={"demo_header": "HEADER"}
+        )
+        self.assertEqual(result, b"{}")
+        self.assertEqual(len(responses.calls), 1)
+        self.assertEqual(
+            responses.calls[0].request.headers["Content-Type"], "application/xml"
+        )
+        self.assertEqual(responses.calls[0].request.headers["demo_header"], "HEADER")
+
+        url = self.url + "custom/path"
+        self.webservice.url += "{endpoint}"
+        responses.add(responses.POST, url, body="{}")
+        result = self.webservice.call(
+            "post",
+            url_params={"endpoint": "custom/path"},
+            headers={"demo_header": "HEADER"},
+        )
+        self.assertEqual(result, b"{}")
+        self.assertEqual(len(responses.calls), 2)
         self.assertEqual(
             responses.calls[0].request.headers["Content-Type"], "application/xml"
         )
         self.assertEqual(responses.calls[0].request.headers["demo_header"], "HEADER")
```

## Comparing `odoo_addon_webservice-15.0.1.0.0.6.dist-info/METADATA` & `odoo_addon_webservice-15.0.1.0.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-webservice
-Version: 15.0.1.0.0.6
+Version: 15.0.1.0.1
 Summary: Defines webservice abstract definition to be used generally
 Home-page: https://github.com/OCA/web-api
 Author: Creu Blanca,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_webservice-15.0.1.0.0.6.dist-info/RECORD` & `odoo_addon_webservice-15.0.1.0.1.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 odoo/addons/webservice/README.rst,sha256=BxbU6u4DhQlBSMTSquJNkQrGIsnWHQv3fVAwlg7XMtM,2637
 odoo/addons/webservice/__init__.py,sha256=KoGIwmS8gsnjpouQ6mpx2hUudXGZnCnD6Z2bcVxce5s,46
-odoo/addons/webservice/__manifest__.py,sha256=FpvCOLByO6BKw-lJG0k313CimKjpb5hpRZdP4DP-KAM,606
+odoo/addons/webservice/__manifest__.py,sha256=v7rQTskHBE6yae6dkbUR-N1SEbVlaSM_8VoszmWb1Tg,606
 odoo/addons/webservice/components/__init__.py,sha256=wpgoByWAKuaX-zC_H2QeU6np00QSlzOvMyOd7V9F7aA,57
 odoo/addons/webservice/components/base_adapter.py,sha256=06sCzORzLWWACk5zaaMq9zVeinLD9cMS3IT3skBPbZQ,700
-odoo/addons/webservice/components/request_adapter.py,sha256=xj8am4N2gRubj4L5_QIhyOsP7IqwfjrIlVFAc5uvijM,1439
+odoo/addons/webservice/components/request_adapter.py,sha256=5I5kEf-l1JHaeHjVspjkEkUGjBtsc_UvBfBPliHr_1Y,1869
 odoo/addons/webservice/i18n/fr.po,sha256=uzdrvY1o_SZ8U7P9gRaoxfFlihwbRj2Yd-51UTQrmNI,5328
 odoo/addons/webservice/i18n/webservice.pot,sha256=XVFUCZpZVv-tC8dgtWXVkSKNjd1c_3jCZv88GsBxE8g,4976
 odoo/addons/webservice/models/__init__.py,sha256=vPMRJ-Sh3KP9faRztRkl72StEP3abYutbrunzQZe_hk,33
 odoo/addons/webservice/models/webservice_backend.py,sha256=ypiRiO4w-HVwxkudlo48c_F5jFDmy_JfdspRkg4Pu_Y,1479
 odoo/addons/webservice/readme/CONTRIBUTORS.rst,sha256=okC5oUytz6l8wtkSnOgx_v81TJU3bDNcExRpiEuD0dM,41
 odoo/addons/webservice/readme/DESCRIPTION.rst,sha256=Ez74ZQ4Hmq20wmdh3qjaYS6PhSnqbne8f0a5qytO8YQ,62
 odoo/addons/webservice/security/ir.model.access.csv,sha256=_YxINe4XvH5i2E8_u-iKX_gzV8I4fDs96VL7FkPy_0A,183
 odoo/addons/webservice/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/webservice/static/description/index.html,sha256=6vVxjBTEuz1dt_-04yjizl_krlxSmMVO-HdWHiell-0,11768
 odoo/addons/webservice/tests/__init__.py,sha256=cfdHfl1a3k7ilIvk8jfJSQrWCED9ocKyLf2w_z_ycgk,30
 odoo/addons/webservice/tests/common.py,sha256=VGec0Lq6VEWGm6JbytB45C2Xk9yqt9WOpU4gOvdmqtA,738
-odoo/addons/webservice/tests/test_webservice.py,sha256=EaMul5rK3hjhbHXs1WK_KNOO7Zt_k64L94E3mn7o5oM,3737
+odoo/addons/webservice/tests/test_webservice.py,sha256=k8ExcDJHkACMtEnQGgSZxo8RMANUyZCKE8zbB0aUl48,4899
 odoo/addons/webservice/views/webservice_backend.xml,sha256=s3hs7bcW2q86I2L_ioM7FpxdsIBi3GAcesXfsomTAfk,2885
-odoo_addon_webservice-15.0.1.0.0.6.dist-info/METADATA,sha256=B4k1l7JT8_KKXVWAMh1A_sVvx9ZM9gZLN_YMRj5rvb8,3379
-odoo_addon_webservice-15.0.1.0.0.6.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo_addon_webservice-15.0.1.0.0.6.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_webservice-15.0.1.0.0.6.dist-info/RECORD,,
+odoo_addon_webservice-15.0.1.0.1.dist-info/METADATA,sha256=h1dzzBBgW9InUZYiRenMZJNsVwKEjy_45UpXbeNLRVY,3377
+odoo_addon_webservice-15.0.1.0.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_webservice-15.0.1.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_webservice-15.0.1.0.1.dist-info/RECORD,,
```

