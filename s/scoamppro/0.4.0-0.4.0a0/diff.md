# Comparing `tmp/scoamppro-0.4.0-py3-none-any.whl.zip` & `tmp/scoamppro-0.4.0a0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 31430 bytes, number of entries: 25
--rw-r--r--  2.0 unx       22 b- defN 23-Jul-24 04:17 scoamp/__init__.py
--rw-r--r--  2.0 unx     7991 b- defN 23-Jul-24 04:17 scoamp/api.py
--rw-r--r--  2.0 unx     2212 b- defN 23-Jul-24 04:17 scoamp/globals.py
--rw-r--r--  2.0 unx    15236 b- defN 23-Jul-24 04:17 scoamp/toolkit.py
--rw-r--r--  2.0 unx      486 b- defN 23-Jul-24 04:17 scoamp/commands/__init__.py
--rw-r--r--  2.0 unx     4341 b- defN 23-Jul-24 04:17 scoamp/commands/api.py
--rw-r--r--  2.0 unx     7581 b- defN 23-Jul-24 04:17 scoamp/commands/lfs.py
--rw-r--r--  2.0 unx      117 b- defN 23-Jul-24 04:17 scoamp/commands/internal/__init__.py
--rw-r--r--  2.0 unx     1374 b- defN 23-Jul-24 04:17 scoamp/commands/internal/env.py
--rw-r--r--  2.0 unx    11715 b- defN 23-Jul-24 04:17 scoamp/commands/internal/public_model.py
--rw-rw-rw-  2.0 unx     2135 b- defN 23-Jul-24 04:17 scoamp/schema/public-model-meta.json
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-24 04:17 scoamp/utils/__init__.py
--rw-r--r--  2.0 unx     5080 b- defN 23-Jul-24 04:17 scoamp/utils/api_utils.py
--rw-r--r--  2.0 unx      501 b- defN 23-Jul-24 04:17 scoamp/utils/decrypt.py
--rw-r--r--  2.0 unx     1779 b- defN 23-Jul-24 04:17 scoamp/utils/error.py
--rw-r--r--  2.0 unx     5150 b- defN 23-Jul-24 04:17 scoamp/utils/helper.py
--rw-r--r--  2.0 unx      421 b- defN 23-Jul-24 04:17 scoamp/utils/logger.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-24 04:17 tests/__init__.py
--rw-r--r--  2.0 unx     9110 b- defN 23-Jul-24 04:17 tests/test_utils_helper.py
--rw-rw-rw-  2.0 unx    11334 b- defN 23-Jul-24 04:18 scoamppro-0.4.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     1265 b- defN 23-Jul-24 04:18 scoamppro-0.4.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-24 04:18 scoamppro-0.4.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       48 b- defN 23-Jul-24 04:18 scoamppro-0.4.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       13 b- defN 23-Jul-24 04:18 scoamppro-0.4.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2026 b- defN 23-Jul-24 04:18 scoamppro-0.4.0.dist-info/RECORD
-25 files, 90029 bytes uncompressed, 28168 bytes compressed:  68.7%
+Zip file size: 31257 bytes, number of entries: 25
+-rw-r--r--  2.0 unx       23 b- defN 23-Jul-13 11:33 scoamp/__init__.py
+-rw-r--r--  2.0 unx     7991 b- defN 23-Jul-14 11:03 scoamp/api.py
+-rw-r--r--  2.0 unx     2212 b- defN 23-Jul-13 12:34 scoamp/globals.py
+-rw-r--r--  2.0 unx    14506 b- defN 23-Jul-14 10:52 scoamp/toolkit.py
+-rw-r--r--  2.0 unx      486 b- defN 23-Jun-06 04:20 scoamp/commands/__init__.py
+-rw-r--r--  2.0 unx     4341 b- defN 23-Jul-14 11:06 scoamp/commands/api.py
+-rw-r--r--  2.0 unx     7581 b- defN 23-Jun-06 04:20 scoamp/commands/lfs.py
+-rw-r--r--  2.0 unx      117 b- defN 23-Jun-06 04:20 scoamp/commands/internal/__init__.py
+-rw-r--r--  2.0 unx     1374 b- defN 23-Jun-06 04:20 scoamp/commands/internal/env.py
+-rw-r--r--  2.0 unx    11723 b- defN 23-Jun-27 08:29 scoamp/commands/internal/public_model.py
+-rw-r--r--  2.0 unx     2135 b- defN 23-Jun-06 04:20 scoamp/schema/public-model-meta.json
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-06 04:20 scoamp/utils/__init__.py
+-rw-r--r--  2.0 unx     5080 b- defN 23-Jun-27 08:29 scoamp/utils/api_utils.py
+-rw-r--r--  2.0 unx      501 b- defN 23-Jul-13 08:00 scoamp/utils/decrypt.py
+-rw-r--r--  2.0 unx     1763 b- defN 23-Jul-14 07:36 scoamp/utils/error.py
+-rw-r--r--  2.0 unx     5150 b- defN 23-Jul-13 07:42 scoamp/utils/helper.py
+-rw-r--r--  2.0 unx      405 b- defN 23-Jun-06 04:20 scoamp/utils/logger.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-27 08:29 tests/__init__.py
+-rw-r--r--  2.0 unx     9110 b- defN 23-Jun-27 08:29 tests/test_utils_helper.py
+-rw-r--r--  2.0 unx    11334 b- defN 23-Jul-14 11:17 scoamppro-0.4.0a0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1242 b- defN 23-Jul-14 11:17 scoamppro-0.4.0a0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-14 11:17 scoamppro-0.4.0a0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       47 b- defN 23-Jul-14 11:17 scoamppro-0.4.0a0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       13 b- defN 23-Jul-14 11:17 scoamppro-0.4.0a0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2038 b- defN 23-Jul-14 11:17 scoamppro-0.4.0a0.dist-info/RECORD
+25 files, 89264 bytes uncompressed, 27971 bytes compressed:  68.7%
```

## zipnote {}

```diff
@@ -51,26 +51,26 @@
 
 Filename: tests/__init__.py
 Comment: 
 
 Filename: tests/test_utils_helper.py
 Comment: 
 
-Filename: scoamppro-0.4.0.dist-info/LICENSE
+Filename: scoamppro-0.4.0a0.dist-info/LICENSE
 Comment: 
 
-Filename: scoamppro-0.4.0.dist-info/METADATA
+Filename: scoamppro-0.4.0a0.dist-info/METADATA
 Comment: 
 
-Filename: scoamppro-0.4.0.dist-info/WHEEL
+Filename: scoamppro-0.4.0a0.dist-info/WHEEL
 Comment: 
 
-Filename: scoamppro-0.4.0.dist-info/entry_points.txt
+Filename: scoamppro-0.4.0a0.dist-info/entry_points.txt
 Comment: 
 
-Filename: scoamppro-0.4.0.dist-info/top_level.txt
+Filename: scoamppro-0.4.0a0.dist-info/top_level.txt
 Comment: 
 
-Filename: scoamppro-0.4.0.dist-info/RECORD
+Filename: scoamppro-0.4.0a0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## scoamp/__init__.py

```diff
@@ -1 +1 @@
-__version__ = '0.4.0'
+__version__ = '0.4.0a0'
```

## scoamp/toolkit.py

```diff
@@ -10,18 +10,18 @@
 from filelock import FileLock
 from requests.adapters import Retry
 from tqdm import tqdm
 from urllib.parse import urlparse, urlunparse
 
 from scoamp.globals import global_api as api
 from scoamp.globals import Environment
-from scoamp.utils.error import FileDownloadError, APIError, SubprocessError
+from scoamp.utils.error import FileDownloadError, APIError
 from scoamp.utils.logger import get_logger
 
-logger = get_logger()
+logger = get_logger(__name__)
 
 def model_file_list(
     model_id: str,
     *,
     is_public: bool = False,
     revision: Optional[str] = None,
 ) -> list:
@@ -192,15 +192,14 @@
     progress = tqdm(
         unit='B',
         unit_scale=True,
         unit_divisor=1024,
         total=total,
         initial=downloaded_size,
         desc=f'Downloading {desc_file_name}',
-        ascii='.#',
     )
     for chunk in r.iter_content(chunk_size=API_FILE_DOWNLOAD_CHUNK_SIZE):
         if chunk:  # filter out keep-alive new chunks
             progress.update(len(chunk))
             temp_file.write(chunk)
     progress.close()
     temp_file.flush()
@@ -312,15 +311,15 @@
 
 
 def create_and_upload_model(
     model_id: str,
     local_dir: str,
     model_space_name: str,
     allow_exist: bool = False,
-) -> str:
+):
     """Create a new model and upload files from local directory
 
     `local_dir` should contains all the model files, and must not have a '.git' directory in it (not a git repo).
     This method will use 'git' and 'git-lfs' to init the local dir, and push to remote server, then de-init by remove '.git'.
 
     Args:
         model_id (`str`):
@@ -331,27 +330,23 @@
             model space name in AMP platform
         allow_exist (`bool`):
             if remote repo with given 'model_id' has been create before and no files uploaded yet, reuse it.
 
     Returns:
         remote repo path
     """
-    if not isinstance(model_id, str):
-        raise ValueError("'model_id' should be string type")
-    if not model_space_name:
-        raise ValueError("'model_space_name' should not be None or empty")
     if not local_dir:
         raise ValueError('local_dir shoud be specified')
     local_dir_path = Path(local_dir).expanduser().absolute()
     if not local_dir_path.exists():
         raise FileNotFoundError(f"local directory '{local_dir}' not exists")
-
+    
     if len(os.listdir(local_dir_path)) == 0:
         raise ValueError(f"local_dir '{local_dir}' is empty")
-
+    
     # ensure local dir not a git repo
     for fn in ['.git', '.gitattributes']:
         if (local_dir_path / fn).exists():
             raise FileExistsError(f"local dir should not contains '{fn}'")
 
     # check git/lfs install
     Environment.check_git_and_lfs()
@@ -361,15 +356,14 @@
         model_info = api.get_user_model_info(model_id)
         if not allow_exist:
             raise ValueError(f"model id '{model_id}' has been exists at amp")
         files = model_file_list(model_id)
         # ensure has only one file, and must named '.gitattributes'
         if len(files) != 1 or files[0]['path'] != '.gitattributes':
             raise ValueError(f"invalid remote model repo '{model_id}': has more than one file")
-        logger.warning("model has been created on AMP before, resuse it!")
     except APIError as err:
         if err.status_code != 404: raise
         # create a new one
         model_info = api.create_user_model(model_id, model_space_name)
     git_url = model_info['repository_uri']
     logger.info(f"remote model url: {git_url}")
 
@@ -387,34 +381,25 @@
         r = subprocess.run(f'git clone {authed_git_url} {tmp_git_dir_path}', shell=True, check=False, capture_output=True, encoding='utf-8')
         if r.returncode:
             raise RuntimeError(f'git clone remote model error: {r.stderr}')
         
         logger.info('upload local model to remote repo...')
 
         shell_script = f"""
-        set -ex
+        set -e
         git config user.name 'scoamp-agent'
         git config user.email 'scoamp-agent@sensecore.cn'
         scoamp lfs setup .
         git --work-tree {local_dir_path} add --no-all .
         git commit -m 'add model files'
         git push origin master
         """
 
-        try:
-            subprocess.run(
-                shell_script,
-                shell=True,
-                check=True,
-                cwd=tmp_git_dir_path,
-                capture_output=True,
-                encoding='utf-8',
-            )
-        except subprocess.CalledProcessError as exc:
-            logger.error("something error when uploading local model files to AMP")
-            raise SubprocessError(
-                f"run sub-process error, see details below\n"\
-                f"[origin output]\n{exc.stderr}\n"\
-                f"[exit code]\n{exc.returncode}"
-            )
+        r = subprocess.run(
+            shell_script,
+            shell=True,
+            check=True,
+            cwd=tmp_git_dir_path,
+            capture_output=True
+        )
 
-    return git_url
+    return git_url
```

## scoamp/commands/internal/public_model.py

```diff
@@ -28,15 +28,15 @@
 class PipelineStatus(str, Enum):
     Unknown = 0
     Pending = 1
     Created = 2
     Uploaded = 3
     Finished = 4
 
-logger = get_logger()
+logger = get_logger(__name__)
 
 app = typer.Typer(name='public-model', help='public model operation')
 
 @app.command(help="create an empty public model")
 @err_wrapper
 def create(
     name: str = typer.Argument(..., help='public model name, should be global unique'),
```

## scoamp/utils/error.py

```diff
@@ -1,14 +1,14 @@
 from enum import Enum
 from functools import wraps
 import typer
 from jsonschema import ValidationError
 from requests import HTTPError, Response
 
-from .logger import get_logger
+from .logger import default_logger as logger
 
 class ScoampBaseError(Exception):
     pass
 
 class NotLoginError(ScoampBaseError):
     pass
 
@@ -34,15 +34,14 @@
     ApiError = 2
     MetaInvalidError = 3
 
     
 def err_wrapper(f):
     @wraps(f)
     def wrapper(*args, **kwargs):
-        logger = get_logger()
         try:
             return f(*args, **kwargs)
         except NotLoginError:
             logger.error("no or invalid auth info, use 'scoamp login' first")
             raise typer.Exit(ExitCode.LoginError)
         except APIError:
             logger.exception('call amp api error')
```

## scoamp/utils/logger.py

```diff
@@ -1,19 +1,14 @@
 import logging
 from rich.logging import RichHandler
 
-lib_name = __name__.split('.')[0]
+#LOG_FORMAT = '%(asctime)s -- %(levelname)s: %(message)s'
+LOG_FORMAT = '%(message)s'
 
-def get_logger(name: str=None):
-    if name is None:
-        name = lib_name
-    return logging.getLogger(name)
+logging.basicConfig(format=LOG_FORMAT, datefmt="[%X]", handlers=[RichHandler(rich_tracebacks=True)])
 
+def get_logger(name: str=None, level=logging.INFO):
+    logger = logging.getLogger(name)
+    logger.setLevel(level)
+    return logger
 
-def _init_logger():
-    logger = get_logger()
-    handler = RichHandler(rich_tracebacks=True, omit_repeated_times=False)
-    logger.addHandler(handler)
-    logger.setLevel(logging.INFO)
-
-_init_logger()
-del _init_logger
+default_logger = get_logger()
```

## Comparing `scoamppro-0.4.0.dist-info/LICENSE` & `scoamppro-0.4.0a0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `scoamppro-0.4.0.dist-info/METADATA` & `scoamppro-0.4.0a0.dist-info/METADATA`

 * *Files 5% similar despite different names*

```diff
@@ -1,38 +1,34 @@
 Metadata-Version: 2.1
 Name: scoamppro
-Version: 0.4.0
+Version: 0.4.0a0
 Summary: SenseCore AI Model Platform Command Line Tool
-Home-page: UNKNOWN
 Author: SenseTime, Inc.
 Author-email: hpan@sensetime.com
 License: Apache 2.0
 Keywords: machine-learning deep-learning models
-Platform: UNKNOWN
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3 :: Only
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
 Requires-Python: >=3.7.0
+License-File: LICENSE
 Requires-Dist: requests
 Requires-Dist: rich
 Requires-Dist: filelock
 Requires-Dist: tqdm
 Requires-Dist: pycryptodome
 Requires-Dist: typer (==0.7.0)
 Requires-Dist: click (>=8.0.0)
 Requires-Dist: jsonschema (>=3.2)
 Provides-Extra: testing
 Requires-Dist: pytest ; extra == 'testing'
 Requires-Dist: pytest-cov ; extra == 'testing'
 Requires-Dist: pytest-env ; extra == 'testing'
 Requires-Dist: pytest-xdist ; extra == 'testing'
 
-UNKNOWN
-
-
```

